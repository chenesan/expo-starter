# 台灣餐廳地圖 App 開發記錄

## 📱 專案概述

這是一個基於 Expo Router 和 Tamagui 設計系統開發的台灣餐廳地圖應用程式，提供地圖和列表兩種瀏覽模式，讓用戶可以輕鬆發現和探索台灣的美食餐廳。

## 🛠️ 技術架構

### 核心技術棧
- **框架**: Expo SDK 53.0.13 + Expo Router 5.1.1
- **UI 設計系統**: Tamagui v1.112.21
- **地圖服務**: react-native-maps 1.18.0
- **位置服務**: expo-location 18.1.0
- **開發語言**: TypeScript
- **平台支援**: iOS, Android, Web

### 主要依賴套件
```json
{
  "@tamagui/core": "^1.112.21",
  "@tamagui/config": "^1.112.21",
  "@tamagui/font-inter": "^1.112.21",
  "@tamagui/theme-base": "^1.112.21",
  "@tamagui/toast": "^1.112.21",
  "@tamagui/animations-react-native": "^1.112.21",
  "react-native-maps": "1.18.0",
  "expo-location": "~18.1.0",
  "react-native-svg": "15.9.0"
}
```

## 🏗️ 專案結構

```
├── app/
│   ├── _layout.tsx              # 根佈局 (Tamagui + Navigation 配置)
│   └── (tabs)/
│       ├── _layout.tsx          # Tab 導航配置
│       ├── index.tsx            # 地圖頁面
│       └── list.tsx             # 列表頁面
├── components/                  # 可重用組件
├── data/
│   └── restaurants.ts           # 餐廳資料
├── types/
│   └── restaurant.ts            # TypeScript 類型定義
├── hooks/
│   └── useFrameworkReady.ts     # 框架初始化 Hook
└── tamagui.config.ts           # Tamagui 配置文件
```

## 🎯 核心功能

### 1. 地圖模式 (`app/(tabs)/index.tsx`)
- **互動式地圖**: 使用 react-native-maps 顯示台灣餐廳位置
- **位置服務**: 自動獲取用戶當前位置 (支援 Web 平台降級)
- **餐廳標記**: 在地圖上顯示餐廳位置標記
- **詳情彈窗**: 點擊標記顯示餐廳詳細資訊的 Sheet 組件
- **響應式設計**: 支援不同平台的地圖提供商

### 2. 列表模式 (`app/(tabs)/list.tsx`)
- **餐廳卡片**: 美觀的卡片式餐廳展示
- **搜尋功能**: 支援餐廳名稱、料理類型、地址搜尋
- **分類篩選**: 按料理類型篩選餐廳
- **詳細資訊**: 顯示評分、價格範圍、營業時間等
- **特色標籤**: 展示餐廳特色和招牌菜

### 3. 資料管理
- **餐廳資料結構**: 完整的 TypeScript 類型定義
- **豐富資訊**: 包含名稱、地址、電話、評分、價格、特色等
- **圖片資源**: 使用 Pexels 高品質美食圖片

## 📊 餐廳資料

目前包含 6 家台灣知名餐廳：

| 餐廳名稱 | 料理類型 | 評分 | 價格範圍 | 特色 |
|---------|---------|------|----------|------|
| 鼎泰豐 | 台式料理 | 4.8 | $$ | 小籠包、炒飯、湯品 |
| 阿宗麵線 | 台式小吃 | 4.5 | $ | 大腸麵線、蚵仔麵線 |
| 欣葉台菜 | 台菜 | 4.6 | $$$ | 台菜、海鮮、包廂 |
| 度小月擔仔麵 | 台南料理 | 4.4 | $$ | 擔仔麵、滷味、古早味 |
| 饒河夜市胡椒餅 | 夜市小吃 | 4.7 | $ | 胡椒餅、現烤、排隊美食 |
| 永康牛肉麵 | 牛肉麵 | 4.3 | $$ | 紅燒牛肉麵、清燉牛肉麵 |

## 🎨 設計特色

### UI/UX 設計
- **Tamagui 設計系統**: 統一的設計語言和組件庫
- **響應式佈局**: 適配不同螢幕尺寸
- **深色/淺色主題**: 支援系統主題切換
- **流暢動畫**: 使用 react-native-reanimated 提供流暢體驗
- **直觀導航**: Tab 導航提供清晰的功能分區

### 視覺元素
- **Material Icons**: 統一的圖標系統
- **評分星級**: 視覺化餐廳評分
- **價格指示**: 直觀的價格範圍顯示
- **特色標籤**: 彩色標籤展示餐廳特色
- **高品質圖片**: Pexels 美食攝影

## 🔧 技術實現

### 1. Tamagui 配置問題解決
**問題**: `Haven't called createTamagui Yet. Cannot find Tamagui configuration`

**解決方案**:
- 創建 `tamagui.config.ts` 配置文件
- 使用 `createTamagui()` 函數正確初始化
- 在 `app/_layout.tsx` 中正確包裝 `TamaguiProvider`
- 添加 TypeScript 類型聲明

### 2. 跨平台兼容性
**Web 平台適配**:
- 位置服務降級處理 (預設台北位置)
- 地圖提供商平台判斷
- 用戶位置顯示的條件渲染

**圖標系統**:
- 避免使用 lucide-react-native (React 19 兼容性問題)
- 改用 @expo/vector-icons 的 MaterialIcons

### 3. 狀態管理
- 使用 React Hooks 管理本地狀態
- 位置權限處理
- 搜尋和篩選狀態管理
- Sheet 組件開關狀態

## 📱 用戶體驗

### 地圖頁面體驗
1. **載入流程**: 顯示載入狀態 → 獲取位置權限 → 顯示地圖
2. **互動流程**: 瀏覽地圖 → 點擊餐廳標記 → 查看詳細資訊
3. **資訊展示**: Sheet 彈窗展示完整餐廳資訊

### 列表頁面體驗
1. **瀏覽流程**: 查看餐廳列表 → 使用搜尋/篩選 → 瀏覽詳細資訊
2. **搜尋體驗**: 即時搜尋結果更新
3. **篩選體驗**: 水平滾動的分類篩選器

## 🚀 開發歷程

### 第一階段: 專案初始化
- 基於 create-expo-app 建立專案基礎
- 安裝 Tamagui 設計系統相關套件
- 配置 TypeScript 和基本專案結構

### 第二階段: 核心功能開發
- 實現地圖頁面和餐廳標記功能
- 開發列表頁面和搜尋篩選功能
- 建立餐廳資料結構和 TypeScript 類型

### 第三階段: 問題解決和優化
- 解決 Tamagui 配置問題
- 處理 React 19 兼容性問題
- 優化跨平台兼容性

## 🎯 未來發展方向

### 功能擴展
- [ ] 餐廳詳細頁面
- [ ] 用戶評論和評分系統
- [ ] 收藏功能
- [ ] 路線導航
- [ ] 附近餐廳推薦
- [ ] 美食照片分享

### 技術優化
- [ ] 資料庫整合 (Supabase)
- [ ] 用戶認證系統
- [ ] 離線支援
- [ ] 推播通知
- [ ] 效能優化

### 設計改進
- [ ] 更豐富的動畫效果
- [ ] 自定義地圖樣式
- [ ] 更多互動元素
- [ ] 無障礙功能支援

## 📝 開發筆記

### 重要技術決策
1. **選擇 Tamagui**: 提供統一的設計系統和優秀的效能
2. **避免 lucide-react-native**: React 19 兼容性問題
3. **使用 MaterialIcons**: 穩定的圖標解決方案
4. **Web 優先設計**: 考慮 Web 平台的限制和特性

### 學習重點
- Tamagui 配置和使用方法
- Expo Router 的檔案路由系統
- react-native-maps 的跨平台使用
- TypeScript 在 React Native 中的應用

---

**專案狀態**: ✅ 基礎功能完成，可正常運行
**最後更新**: 2025年1月
**開發者**: Bolt AI Assistant